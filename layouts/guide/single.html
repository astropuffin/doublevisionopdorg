{{ define "main" }}

<section class="section-sm">
  <div class="container">
    <div class="row">
      <div class="col-12">
        <h2 class="section-title">{{ .Title }}</h2>
      </div>
      <div class="col-12 mb-4">
        <img style="max-height: 50vh;object-fit: contain;" src="{{ .Params.Image | relURL }}" alt="{{ .Title }}" class="img-fluid w-100">
      </div>
    </div>
    <div class="row">
      <div class="col-12 mb-50">
        <div class="content">
          {{ .Content }}
        </div>
        <div>
          {{ with .Site.GetPage "section" "candidates"}}
            {{ range where (.Data.Pages.GroupByParam "Office") ".Key" "==" "Oakland City Council" }}
            <div>
              <h3>{{ .Key }}</h3>
                <div>
                  {{ range (.Pages.GroupByParam "district") }}
                  {{ if (or (eq .Key $.Page.Params.District) (eq .Key "At-Large"))}}
                    <h4>District: {{ .Key }}</h4>
                    <div class="row filtr-container">
                      {{ range (.Pages)}}
                        <div class="col-lg-4 col-sm-6 filtr-item">
                          {{ .Render "candidate" }}
                        </div>
                      {{ end }}
                    </div>
                  {{ end }}
                  {{ end }}
                </div>
            </div>
            {{ end }}
            {{ range where (.Data.Pages.GroupByParam "Office") ".Key" "!=" "Oakland City Council" }}
            <div>
              <h3>{{ .Key }}</h3>
                <div>
                  {{ range (.Pages.GroupByParam "district") }}
                  {{ if (or (eq .Key $.Page.Params.District) (eq .Key "At-Large"))}}
                    <h4>District: {{ .Key }}</h4>
                    <div class="row filtr-container">
                      {{ range (.Pages)}}
                        <div class="col-lg-4 col-sm-6 filtr-item">
                          {{ .Render "candidate" }}
                        </div>
                      {{ end }}
                    </div>
                  {{ end }}
                  {{ end }}
                </div>
            </div>
            {{ end }}
          {{ end }}
        </div>
      </div>
    </div>
  </div>
</section>

{{ end }}